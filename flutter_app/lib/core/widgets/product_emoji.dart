import 'package:flutter/material.dart';

/// Emoji map matching Vue.js implementation
/// Updated with comprehensive list of items
const Map<String, String> productEmojis = {
  // --- Raw Resources & Mining ---
  "demir": "â›“ï¸",
  "demir cevheri": "ðŸª¨",
  "kÃ¶mÃ¼r": "âš«",
  "altÄ±n": "ðŸª™",
  "altÄ±n cevheri": "âœ¨",
  "gÃ¼mÃ¼ÅŸ": "ðŸ¥ˆ",
  "gÃ¼mÃ¼ÅŸ cevheri": "bijoux",
  "bakÄ±r": "ðŸ¥‰",
  "Ã§elik": "ðŸ”©",
  "petrol": "ðŸ›¢ï¸",
  "benzin": "â›½",
  "taÅŸ": "ðŸª¨",
  "kum": "â³",
  "kil": "ðŸ§±",
  "odun": "ðŸªµ",
  "kereste": "ðŸªµ",
  "kalas": "ðŸ“",

  // --- Farming & Agriculture ---
  "buÄŸday": "ðŸŒ¾",
  "arpa": "ðŸŒ¾",
  "yulaf": "ðŸŒ¾",
  "mÄ±sÄ±r": "ðŸŒ½",
  "pamuk": "â˜ï¸",
  "saman": "ðŸŒ¾",
  "gÃ¼bre": "ðŸ’©",
  "tohum": "ðŸŒ±",
  "yonca": "ðŸ€",

  // --- Food: Fruits ---
  "elma": "ðŸŽ",
  "yeÅŸil elma": "ðŸ",
  "armut": "ðŸ",
  "portakal": "ðŸŠ",
  "mandalina": "ðŸŠ",
  "limon": "ðŸ‹",
  "muz": "ðŸŒ",
  "karpuz": "ðŸ‰",
  "Ã¼zÃ¼m": "ðŸ‡",
  "Ã§ilek": "ðŸ“",
  "yaban mersini": "ðŸ«",
  "kavun": "ðŸˆ",
  "kiraz": "ðŸ’",
  "ÅŸeftali": "ðŸ‘",
  "ananas": "ðŸ",
  "mango": "ðŸ¥­",
  "kivi": "ðŸ¥",
  "hindistan cevizi": "ðŸ¥¥",
  "nar": "ðŸ”´",
  "avakado": "ðŸ¥‘",

  // --- Food: Vegetables ---
  "domates": "ðŸ…",
  "patates": "ðŸ¥”",
  "havuÃ§": "ðŸ¥•",
  "biber": "ðŸŒ¶ï¸",
  "yeÅŸil biber": "ðŸ«‘",
  "salatalÄ±k": "ðŸ¥’",
  "marul": "ðŸ¥¬",
  "brokoli": "ðŸ¥¦",
  "sarÄ±msak": "ðŸ§„",
  "soÄŸan": "ðŸ§…",
  "mantar": "ðŸ„",
  "patlÄ±can": "ðŸ†",
  "mÄ±sÄ±r koÃ§anÄ±": "ðŸŒ½",
  "bezelye": "ðŸ«›",
  "kabak": "ðŸŽƒ",

  // --- Food: Animal Products ---
  "sÃ¼t": "ðŸ¥›",
  "yumurta": "ðŸ¥š",
  "bal": "ðŸ¯",
  "et": "ðŸ¥©",
  "biftek": "ðŸ¥©",
  "sosis": "ðŸŒ­",
  "salam": "ðŸ¥“",
  "tavuk": "ðŸ—",
  "tavuk butu": "ðŸ—",
  "hindi": "ðŸ¦ƒ",
  "balÄ±k": "ðŸŸ",
  "somon": "ðŸ£",
  "karides": "ðŸ¦",
  "yengeÃ§": "ðŸ¦€",
  "istakoz": "ðŸ¦ž",

  // --- Food: Bakery & Processed ---
  "ekmek": "ðŸž",
  "baget": "ðŸ¥–",
  "kruvasan": "ðŸ¥",
  "pide": "ðŸ«“",
  "simit": "ðŸ¥¯",
  "pancake": "ðŸ¥ž",
  "waffle": "ðŸ§‡",
  "peynir": "ðŸ§€",
  "tereyaÄŸÄ±": "ðŸ§ˆ",
  "yoÄŸurt": "ðŸ¥£",
  "krema": "ðŸ§",
  "un": "ðŸ¥¡",
  "ÅŸeker": "ðŸ¬",
  "tuz": "ðŸ§‚",
  "zeytinyaÄŸÄ±": "ðŸ«—",
  "ayÃ§iÃ§ek yaÄŸÄ±": "ðŸŒ»",

  // --- Food: Meals ---
  "pizza": "ðŸ•",
  "hamburger": "ðŸ”",
  "sandviÃ§": "ðŸ¥ª",
  "sosisli": "ðŸŒ­",
  "patates kÄ±zartmasÄ±": "ðŸŸ",
  "taco": "ðŸŒ®",
  "burrito": "ðŸŒ¯",
  "dÃ¶ner": "ðŸ¥™",
  "kebap": "ðŸ¢",
  "makarna": "ðŸ",
  "pilav": "ðŸš",
  "Ã§orba": "ðŸ¥£",
  "salata": "ðŸ¥—",
  "kÃ¶fte": "ðŸ§†",
  "sushi": "ðŸ£",

  // --- Food: Desserts ---
  "dondurma": "ðŸ¦",
  "pasta": "ðŸ°",
  "kek": "ðŸŽ‚",
  "kurabiye": "ðŸª",
  "Ã§ikolata": "ðŸ«",
  "ÅŸekerleme": "ðŸ¬",
  "lolipop": "ðŸ­",
  "puding": "ðŸ®",
  "baklava": "ðŸ¯",
  
  // --- Drinks ---
  "su": "ðŸ’§",
  "kahve": "â˜•",
  "Ã§ay": "ðŸµ",
  "sÃ¼tlÃ¼ kahve": "ðŸ§‹",
  "meyve suyu": "ðŸ§ƒ",
  "portakal suyu": "ðŸŠ",
  "limonata": "ðŸ‹",
  "bira": "ðŸº",
  "ÅŸarap": "ðŸ·",
  "kola": "ðŸ¥¤",
  "soda": "ðŸ¥¤",
  "ayran": "ðŸ¥›",

  // --- Textiles & Clothing ---
  "kumaÅŸ": "ðŸ§µ",
  "iplik": "ðŸ§¶",
  "yÃ¼n": "ðŸ§¶",
  "pamuk ipliÄŸi": "ðŸ§µ",
  "deri": "ðŸ„",
  "kÃ¼rk": "ðŸ§¥",
  "kÄ±yafet": "ðŸ‘•",
  "tiÅŸÃ¶rt": "ðŸ‘•",
  "gÃ¶mlek": "ðŸ‘”",
  "pantolon": "ðŸ‘–",
  "kot pantolon": "ðŸ‘–",
  "elbise": "ðŸ‘—",
  "etek": "ðŸ‘—",
  "ceket": "ðŸ§¥",
  "mont": "ðŸ§¥",
  "ayakkabÄ±": "ðŸ‘ž",
  "spor ayakkabÄ±": "ðŸ‘Ÿ",
  "topuklu ayakkabÄ±": "ðŸ‘ ",
  "bot": "ðŸ¥¾",
  "ÅŸapka": "ðŸ§¢",
  "eldiven": "ðŸ§¤",
  "atkÄ±": "ðŸ§£",
  "Ã§orap": "ðŸ§¦",
  "Ã§anta": "ðŸ‘œ",
  "sÄ±rt Ã§antasÄ±": "ðŸŽ’",
  "cÃ¼zdan": "ðŸ‘›",
  "kemer": "ðŸ‘–",

  // --- Jewelry & Luxury (Specifics) ---
  "mÃ¼cevher": "ðŸ’Ž",
  "elmas": "ðŸ’Ž",
  "zÃ¼mrÃ¼t": "ðŸ’š",
  "yakut": "â¤ï¸",
  "safir": "ðŸ’™",
  "altÄ±n kolye": "ðŸ“¿",
  "gÃ¼mÃ¼ÅŸ kolye": "ðŸ“¿",
  "inci kolye": "ðŸ“¿",
  "altÄ±n yÃ¼zÃ¼k": "ðŸ’",
  "gÃ¼mÃ¼ÅŸ yÃ¼zÃ¼k": "ðŸ’",
  "elmas yÃ¼zÃ¼k": "ðŸ’",
  "pÄ±rlanta yÃ¼zÃ¼k": "ðŸ’",
  "kÃ¼pe": "ðŸ‘‚", // or ðŸ’Ž
  "altÄ±n kÃ¼pe": "âœ¨",
  "gÃ¼mÃ¼ÅŸ kÃ¼pe": "âœ¨",
  "bilezik": "â­•",
  "altÄ±n bilezik": "ðŸŸ¡",
  "saat": "âŒš",
  "kol saati": "âŒš",
  "lÃ¼ks saat": "âŒš",
  "taÃ§": "ðŸ‘‘",

  // --- Electronics & Technology ---
  "elektrik": "âš¡",
  "devre kartÄ±": "dk", // ðŸ“Ÿ
  "iÅŸlemci": "ðŸ–²ï¸",
  "Ã§ip": "ðŸ’¾",
  "bilgisayar": "ðŸ’»",
  "laptop": "ðŸ’»",
  "telefon": "ðŸ“±",
  "akÄ±llÄ± telefon": "ðŸ“±",
  "tablet": "ðŸ“±",
  "televizyon": "ðŸ“º",
  "kamera": "ðŸ“·",
  "fotoÄŸraf makinesi": "ðŸ“¸",
  "kulaklÄ±k": "ðŸŽ§",
  "hoparlÃ¶r": "ðŸ”Š",
  "batarya": "ðŸ”‹",
  "pil": "ðŸ”‹",
  "kablo": "ðŸ”Œ",
  "ampul": "ðŸ’¡",

  // --- Home & Furniture ---
  "masa": "ðŸª‘",
  "sandalye": "ðŸª‘",
  "koltuk": "ðŸ›‹ï¸",
  "yatak": "ðŸ›ï¸",
  "dolap": "ðŸšª",
  "halÄ±": "ðŸ§¶",
  "perde": "ðŸªŸ",
  "lamba": "ðŸ›‹ï¸",
  "vazo": "ðŸº",
  "ayna": "ðŸªž",

  // --- Tools & Construction ---
  "Ã§ekiÃ§": "ðŸ”¨",
  "balta": "ðŸª“",
  "kazma": "â›ï¸",
  "kÃ¼rek": "cc", // ðŸ¥„ or 
  "testere": "ðŸªš",
  "tornavida": "ðŸª›",
  "anahtar": "ðŸ”§",
  "Ã§ivi": "ðŸ“",
  "vida": "ðŸ”©",
  "tuÄŸla": "ðŸ§±",
  "beton": "aaa", // ðŸ§±
  "sÄ±va": "ðŸ§±",
  "boya": "ðŸŽ¨",
  "fÄ±rÃ§a": "ðŸ–Œï¸",

  // --- Vehicles ---
  "araba": "ðŸš—",
  "kamyon": "ðŸš›",
  "tÄ±r": "ðŸš›",
  "motosiklet": "ðŸï¸",
  "bisiklet": "ðŸš²",
  "otobÃ¼s": "ðŸšŒ",
  "traktÃ¶r": "ðŸšœ",
  "uÃ§ak": "âœˆï¸",
  "gemi": "ðŸš¢",
  "tekne": "ðŸ›¥ï¸",
  "lastik": "ðŸ›ž",
  "motor": "âš™ï¸",

  // --- Nature & Environment ---
  "gÃ¼neÅŸ": "â˜€ï¸",
  // "su": "ðŸ’§", // Removed duplicate
  "rÃ¼zgar": "ðŸ’¨",
  "toprak": "ðŸŒ±",
  "aÄŸaÃ§": "ðŸŒ³",
  "orman": "ðŸŒ²",
  "Ã§iÃ§ek": "ðŸŒ¸",
  "gÃ¼l": "ðŸŒ¹",
  "lale": "ðŸŒ·",
  "papatya": "ðŸŒ¼",

  // --- Miscellaneous ---
  "kitap": "ðŸ“–",
  "kaÄŸÄ±t": "ðŸ“„",
  "kalem": "âœï¸",
  "kutu": "ðŸ“¦",
  "paket": "ðŸ“¦",
  "mektup": "âœ‰ï¸",
  "para": "ðŸ’µ",
  "oyuncak": "ðŸ§¸",
  "top": "âš½",
};

/// Widget to display product emoji based on name
class ProductEmoji extends StatelessWidget {
  final String productName;
  final double size;
  
  const ProductEmoji({
    super.key,
    required this.productName,
    this.size = 24,
  });

  @override
  Widget build(BuildContext context) {
    return Text(
      getProductEmoji(productName),
      style: TextStyle(fontSize: size),
    );
  }
}

/// Helper function to get emoji for a product name
String getProductEmoji(String productName) {
  final searchName = productName.toLowerCase().trim();
  
  // 1. Exact match (Priority)
  if (productEmojis.containsKey(searchName)) {
    return productEmojis[searchName]!;
  }
  
  // 2. Starts with (High correlation)
  // e.g. "AltÄ±n Kolye" starts with "AltÄ±n" -> might be okay but we prefer specific
  // But wait, the user wants "GÃ¼mÃ¼ÅŸ Kolye" NOT to return "ðŸ¥ˆ" (GÃ¼mÃ¼ÅŸ).
  // So we should actually trust exact matches of words.
  
  // Strategy: 
  // - If we have "gÃ¼mÃ¼ÅŸ kolye" in the map, exact match catches it.
  // - If we have "gÃ¼mÃ¼ÅŸ" in the map, exact match catches "gÃ¼mÃ¼ÅŸ".
  // - If input is "gÃ¼mÃ¼ÅŸ kolye" and NOT in map:
  //   - partial match will find "gÃ¼mÃ¼ÅŸ".
  //   - user says "don't use silver emoji for silver necklace".
  //   - implying we MUST have specific emoji for necklace.
  //   - IF we don't have it, maybe fallback is better than wrong specific?
  //   - But mostly, providing the data is the solution.
  
  // Let's try to match the *longest* key that is contained in the search name.
  // This helps if we have "elma" and "yeÅŸil elma". Input "taze yeÅŸil elma".
  // "elma" matches. "yeÅŸil elma" matches. "yeÅŸil elma" is longer -> better match.
  
  String? bestMatch;
  int bestMatchLen = 0;

  for (final entry in productEmojis.entries) {
    if (searchName.contains(entry.key)) {
      if (entry.key.length > bestMatchLen) {
        bestMatch = entry.value;
        bestMatchLen = entry.key.length;
      }
    }
  }
  
  if (bestMatch != null) return bestMatch;
  
  return "ðŸ“¦";
}
